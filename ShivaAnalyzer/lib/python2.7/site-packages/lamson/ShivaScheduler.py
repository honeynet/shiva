
"""
Schedules a job to reset individual counters of relayed mails to 0. This would make sure each spammer finds spamPot relaying everyday
"""
import datetime
import os, time
import sys
import logging
from apscheduler.scheduler import Scheduler
import ShivaPushToDb

def reset_counter():
  logging.info("[+]ShivaScheduler Module: Try to push records in Db.")
  ShivaPushToDb.push()

def schedule():
  sched = Scheduler()
  sched.add_interval_job(reset_counter, minutes=60)
  sched.start()
  
  logging.info("spamPot spamScheduler started at %s (1 hour interval). " % datetime.datetime.now())
